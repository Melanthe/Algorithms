# Algorithms

TREES

Task 10

Найти вершины, через которые проходит наибольшее число наибольших (по длине) полупутей, и удалить их (правым удалением) обратным левым обходом.
Формат входных данных:
Входной файл содержит последовательность чисел — ключи вершин в порядке добавления в дерево. Гарантируется, что в дереве не менее двух вершин.
Формат выходных данных:
Выходной файл должен содержать последовательность ключей вершин, полученную прямым левым обходом итогового дерева.
Гарантируется, что хотя бы одна вершина не подлежит удалению.

DYNAMIC PROGRAMMING

Task 15

Существует игра для одного игрока, которая начинается с задания Полигона с n вершинами. Для каждой вершины Полигона задаётся значение — целое число, 
а для каждого ребра — метка операции + (сложение) либо × (умножение). 
Ребра Полигона пронумерованы от 1 до n.

Первым ходом в игре удаляется одно из рёбер. Каждый последующий ход состоит из следующих шагов:
   - выбирается ребро e и две вершины v1 и v2, которые соединены ребром e;
   - ребро e стягивается, то есть вершины v1 и v2 удаляются и заменяются новой вершиной v со значением, равным результату выполнения операции, определённой меткой ребра e, над значениями вершин v1 и v2. 
     В рёбрах, отличных от e и инцидентных вершинам v1 и v2, эти две вершины заменяются на вершину v.
Игра заканчивается, когда больше нет ни одного ребра. Результат игры — это число, равное значению оставшейся вершины.

Формат входных данных:
В первой строке записано число n (3 ≤ n ≤ 500). 
Вторая строка содержит метки рёбер с номерами 1, …, n, между которыми записаны через пробел значения вершин
(первое из них соответствует вершине, инцидентной рёбрам 1 и 2, следующее — инцидентной рёбрам 2 и 3, и так далее, последнее — инцидентной рёбрам n и 1).
Метка ребра — это буква t, соответствующая операции +, или буква x, соответствующая операции ×.
Гарантируется, что при любой последовательности ходов значения вершин находятся в пределах от −9 223 372 036 854 775 808 до 9 223 372 036 854 775 807.

Формат выходных данных:
В первой строке выведите максимальное значение оставшейся вершины, которое может быть достигнуто для заданного Полигона. 
Во второй строке — список всех тех рёбер, удаление которых на первом ходу, позволяет получить это значение. 
Номера рёбер должны быть записаны в возрастающем порядке и отделяться друг от друга одним пробелом.

Task 33

Все пещеры удовлетворяют следующим свойствам:
    - все гроты и переходы расположены на одном уровне;
    - переходы не пересекаются;
    - некоторые из гротов расположены на внешнем кольце и называются внешними гротами;
    - все остальные гроты расположены внутри внешнего кольца и называются внутренними гротами;
    - имеется вход в пещеру, ведущий к одному из внешних гротов;
    - существует ровно три прохода, ведущие от каждого грота к трём другим гротам;
    - если грот является внешним, то два перехода ведут к двум соседним гротам внешнего кольца и точно один переход ведет к внутреннему гроту;
    - переходы, связывающие внешние гроты, называются внешними переходами, а оставшиеся переходы называются внутренними;
    - всегда можно пройти от одного грота к другому, используя только внутренние переходы; при этом существует только один такой маршрут, 
      если разрешается использовать каждый внутренний переход не более одного раза;
    - не все переходы равнозначны по сложности преодоления, они делятся на две группы: лёгкие и тяжёлые.

Необходимо найти маршрут через пещеру, который начинается и заканчивается входным гротом, позволяет посетителям увидеть все другие гроты ровно один раз и содержит как можно меньше тяжёлых переходов.

Формат входных данных:
В первой строке записаны разделённые пробелом два целых числа: число n всех гротов и число k внешних гротов (3 ≤ k < n ≤ 500). 
Гроты нумеруются от 1 до n. Грот 1 является входным. Гроты 1, 2, …, k являются внешними. 
Во внешнем кольце они не обязательно располагаются по порядку.
Следующие 3n / 2 строк содержат описание переходов. 
Каждое описание состоит из трёх целых чисел a, b и c, разделённых пробелом. Числа a и b — номера гротов на концах перехода. 
Число c принимает значение 0 или 1, где 0 — лёгкий переход, а 1 — тяжёлый переход.

Формат выходных данных
В единственной строке выведите набор целых чисел: первое число есть 1 (входной грот), а далее последовательно номера гротов в построенном маршруте. 
Если маршрутов, оптимальных по числу тяжёлых переходов, несколько, выведите любой из них.

DATA STRUCTURES

Task 33

Парк имеет форму прямоугольника с вершинами (0, 0), (x, 0), (x, y), (0, y). 
Внутри парка расположены n деревьев. Создатели парка явно жалеют времени и денег на поливку деревьев и удобрение почвы. 
Поэтому стволы деревьев настолько тонки, что сами деревья мы будем считать точками. 
Недавно Горисполком наехал на дирекцию парка. Дело в том, что в парке, кроме деревьев, ничего нет — ни аттракционов, ни даже детской площадки. 
Директор решил не испытывать судьбу и построить хотя бы детскую площадку. Чтобы чиновники из Горисполкома остались довольны, должны выполняться три условия:
Площадка имеет форму прямоугольника со сторонами, параллельными осям координат.
Внутри площадки нет деревьев (хотя они могут быть на ее границе) и площадка не выходит за границы парка.
Площадь площадки максимальна. Помогите директору не попасть в опалу!

Формат входных данных:
Первая строка содержит три целых числа n, x и y (0 ≤ n ≤ 5000, 1 ≤ x, y ≤ 30 000). 
Следующие n строк описывают расположение деревьев. Каждое дерево описано в отдельной строке, строке содержащей его координаты xi и yi, разделённые одним или несколькими пробелами (0 ≤ xi ≤ x, 0 ≤ yi ≤ y).
Формат выходных данных:
Выведите максимально возможную площадь детской площадки.

Task 35

В 2004 году обитатели планеты Кремонид организовали космическую экспедицию для полета в соседнюю галактику, где по их расчетам существует планета, пригодная для жизни. 
На космическом корабле был сконструирован жилой комплекс, куда заселили множество ученых. 
Жилой комплекс имеет форму прямоугольного параллелепипеда, размера n × m × k. 
Комплекс разбит на кубические отсеки с размера 1 × 1 × 1, всего n × m × k отсеков.
Каждый отсек имеет координаты (x, y, z), соответствующие положению отсека в комплексе, где 1 ≤ x ≤ n, 1 ≤ y ≤ m, 1 ≤ z ≤ k.

Расстоянием между двумя отсеками с координатами (x1, y1, z1) и (x2, y2, z2) назовём число |x1 − x2| + |y1 − y2| + |z1 − z2|. 
Два отсека находятся в одном ряду, если их координаты отличаются ровно одной компонентой (например, (2, 4, 3) и (2, 6, 3) находятся в одном ряду). 
Два отсека являются соседними, если расстояние между ними равно 1.
В каждый отсек был установлен персональный компьютер. После взлета жители комплекса решили объединить свои компьютеры в сеть. 
Был разработан план прокладывания сети, который представляет собой следующую процедуру:

Выбираются два отсека, находящихся в одном ряду. Первый отсек назовем начальным, второй — конечным. Робот, прокладывающий сеть, стартует в начальном отсеке.
На каждом шаге робот передвигается в тот соседний отсек, расстояние от которого до конечного минимально.
При этом он соединяет пары компьютеров в соседних отсеках, через которые он проходит, если это не приводит к образованию цикла. (Циклом называется последовательность компьютеров, в которой первый связан со вторым, второй с третьим и т. д., а последний — с первым.)
Если же соединение приводит к образованию цикла, то робот запоминает координаты этой пары соседних отсеков и не соединяет компьютеры в них между собой.
Робот перемещается, пока не достигнет конечного отсека.
Указанная процедура повторяется t раз. Необходимо определить, какие пары отсеков запомнил робот.

Формат входных данных:
Первая строка содержит четыре числа n, m, k и t, разделённых одним или несколькими пробелами (2 ≤ n, m, k ≤ 100, 1 ≤ t ≤ 20 000).
Далее следует t строк, из которых (i + 1)-я описывает пару отсеков, между которыми продвигается робот, и содержит шесть чисел, разделённых одним или несколькими пробелами: первые три числа — координаты начального отсека, оставшиеся три числа — координаты конечного отсека.
Формат выходных данных:
Выведите последовательность строк, описывающих пары отсеков, которые запомнил робот в хронологическом порядке. 
В каждой строке выведите шесть чисел — координаты отсеков в паре в порядке прохождения их роботом. Числа разделены одним пробелом.

COMMON TASKS

Task 0.0

Дано бинарное поисковое дерево, в котором ключи вершин являются целыми числами в диапазоне от −231 до 231 − 1 включительно. 
Найдите сумму ключей всех вершин дереве.

Task 0.1

По набору ключей постройте бинарное поисковое дерево и выполните его прямой левый обход.

Task 0.2

По набору ключей постройте бинарное поисковое дерево. Удалите из него ключ (правым удалением), если он есть в дереве. 
Выполните прямой левый обход полученного дерева.

Task 0.3

Дана последовательность из s матриц A1, A2, …, As. Требуется определить, в каком порядке их следует перемножать, чтобы число атомарных операций умножения было минимальным.
Дано: в первой строке - s. Дальше s строк с размерами матриц.

